<!--miniprogram/pages/cart/index.wxml-->
<!-- <text>miniprogram/pages/cart/index.wxml</text> -->
<van-cell-group title="">
	<van-cell title="购物车">
		<van-button bindtap="changeEditMode" slot="right-icon" plain hairline type="primary" size="mini">{{editMode?'完成':'编辑'}}</van-button>
	</van-cell>
</van-cell-group>

<van-checkbox-group value="{{ cartIdSelectedResult }}" bind:change="onSelectGoodsItem">

	<block wx:for="{{carts}}" wx:key="id">
		<view class="goods-card-container">
			<view style="width:30px;display: flex;align-items: center;justify-content: center;">
				<van-checkbox shape="square" name="{{item.id}}" icon-size="17px"></van-checkbox>
			</view>
			<view style="flex:1;background:white;">
				<van-card custom-class="goods-card" price="{{item.price*item.num/100}}元" desc="{{item.sku_desc}}"
					title="{{item.goods_name}}" thumb="">
					<view slot="footer">
						<van-stepper data-id="{{item.id}}" data-num="{{item.num}}" bind:change="onCartGoodsNumChange" value="{{item.num}}" step="1" />
					</view>
				</van-card>
			</view>
		</view>
	</block>
</van-checkbox-group>

<van-submit-bar wx:if="{{!editMode}}" price="{{ 3050 }}" button-text="提交订单" bind:submit="onClickButton" tip="">
	<van-checkbox value="{{ allIsSelected }}" bind:change="onSelectAll" shape="square" name="all">
		全选
	</van-checkbox>
</van-submit-bar>

<van-cell-group wx:else title="" style="position: fixed;bottom: 0;left: 0;width: 100%;">
	<van-cell>
		<view slot="title">
			<van-checkbox value="{{ allIsSelected }}" bind:change="onSelectAll" shape="square" name="all">
				全选
			</van-checkbox>
		</view>
		<van-button bindtap="removeCartGoods" size="mini" slot="right-icon" plain type="info">删除</van-button>
	</van-cell>
</van-cell-group>